`/newsyntax
#include <vcc.h>

struct A {
  int x;
  int y;
};

struct B {
  struct A a;
  int z;
};

_(pure) bool foo(struct A a)
  _(returns a.x == 0);

_(pure) bool bar(struct B b)
  _(returns foo(b.a));

void baz(struct B b)
  _(requires bar(b))
{
  _(assert b.a.x == 0)
}

void baz2(struct B b)
  _(requires bar(b))
{
  _(assert b.a.y == 0)
}
`
Verification of baz succeeded.
Verification of baz2 failed.
testcase(28,26) : error VC9500: Assertion 'b.a.y == 0' did not verify.
`
`/newsyntax
#include <vcc.h>

struct A {
  int x, y, z; 
  int *p;
  _(ghost \object pp;)
};

struct A foo()
  _(ensures \result.x == 12)
{
 struct A a;
 int x;
 a.x = 12;
 a.y = 13;
 a.p = &x;
 _(ghost  a.pp = &x;)
 return a;
}


`
Verification of foo succeeded.
`
`/newsyntax
#include <vcc.h>

typedef unsigned __int64 UINT64;
typedef unsigned __int32 UINT32;

struct C;

#ifdef VERIFY

struct A {
  UINT64 a;
  struct C *c;
  _(invariant abs(\this->c).a == \this->a)
};

#endif

_(ghost _(pure) struct A abs(struct C *c);)
struct C {
  UINT32 x;
  UINT32 y;
};

_(ghost _(pure) struct A abs(struct C *c) 
  _(requires \thread_local(c))
{
  struct A r;
  r.a = _(unchecked)(c->x + c->y);
  return r;
})
`
Verification of A#adm succeeded.
Verification of abs succeeded.
`
`/newsyntax
#include <vcc.h>

typedef unsigned __int64 UINT64;

struct T
{
    UINT64 AsUINT64;
    UINT64 Dummy;
};

struct S {
  struct T Privileges;
  _(invariant \mine(&Privileges))
};

struct S1 {
  struct T Privileges;
};

void foo(struct S *q)
  _(requires \wrapped(q))
{ 
  struct S s;
  _(assert &q->Privileges \in \domain(q))
  s.Privileges = q->Privileges;
}

void fooShouldFail(struct S1 *q)
  _(requires \wrapped(q))
{ 
  struct S s;
  s.Privileges = q->Privileges;
}

void fooShouldFailToo(struct S1 *q)
  _(requires \wrapped(q))
{ 
  struct S s;
  _(assert &q->Privileges \in \domain(q))
  s.Privileges = q->Privileges;
}

 
void bar(struct S s);
void bar1(struct S1 s);

void baz(struct S *s)
  _(requires \wrapped(s)) {
  bar(*s);
}

void bazShouldFail(struct S1 *s)
  _(requires \wrapped(s)) {
  bar1(*s);
}
`
Verification of S#adm succeeded.
Verification of foo succeeded.
Verification of fooShouldFail failed.
testcase(32,18) : error VC8512: Assertion 'q->Privileges is thread local' did not verify.
Verification of fooShouldFailToo failed.
testcase(39,26) : error VC9500: Assertion '&q->Privileges \in \domain(q)' did not verify.
Verification of baz succeeded.
Verification of bazShouldFail failed.
testcase(54,9) : error VC8512: Assertion 's.Privileges is thread local' did not verify.
`