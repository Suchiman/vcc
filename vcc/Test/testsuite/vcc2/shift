#include "vcc2.h"

 void foo()
 {
        assert( (0xDEADF00D << 32) == 0xDEADF00D );
        assert( (0xDEADF00D >> 32) == 0xDEADF00D );
        assert( (0xDEADF00D << -1) == 0xDEADF00D );
        assert( (0xDEADF00D >> -1) == 0xDEADF00D );
 }

void bar()
 {
        assert( (0xFFFFFFFFDEADF00D << 64) == 0xFFFFFFFFDEADF00D );
        assert( (0xFFFFFFFFDEADF00D >> 64) == 0xFFFFFFFFDEADF00D );
        assert( (0xFFFFFFFFDEADF00D << -1) == 0xFFFFFFFFDEADF00D );
        assert( (0xFFFFFFFFDEADF00D >> -1) == 0xFFFFFFFFDEADF00D );
 }
`
testcase(5,20) : error VC0000: Shift count must be between 0 and 31.
testcase(6,20) : error VC0000: Shift count must be between 0 and 31.
testcase(7,20) : error VC0000: Shift count must be between 0 and 31.
testcase(8,20) : error VC0000: Shift count must be between 0 and 31.
testcase(13,20) : error VC0000: Shift count must be between 0 and 63.
testcase(14,20) : error VC0000: Shift count must be between 0 and 63.
testcase(15,20) : error VC0000: Shift count must be between 0 and 63.
testcase(16,20) : error VC0000: Shift count must be between 0 and 63.
`

#include "vcc2.h"

void fooSF(int i) {
  int j = (0UI32 << i);
}

void foo1SF(int i) 
  requires(i >= 0)
{
  int j = (0UI32 << i);
}

void foo2SF(int i) 
  requires(i <= 31)
{
  int j = (0UI32 << i);
}

void foo3(int i) 
  requires(0 <= i && i <= 31)
{
  int j = (0UI32 << i);
}

void foo4SF(int i) {
  unsigned __int64 j = (0UI64 << i);
}

void foo5SF(int i) 
  requires(i >= 0)
{
  unsigned __int64 j = (0UI64 << i);
}

void foo6SF(int i) 
  requires(i <= 63)
{
  unsigned __int64 j = (0UI64 << i);
}

void foo7(int i) 
  requires(0 <= i && i <= 63)
{
  unsigned __int64 j = (0UI64 << i);
}

`
Verification of fooSF failed.
testcase(5,21) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo1SF failed.
testcase(11,21) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo2SF failed.
testcase(17,21) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo3 succeeded.
Verification of foo4SF failed.
testcase(27,34) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo5SF failed.
testcase(33,34) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo6SF failed.
testcase(39,34) : error VC8519: Assertion 'i in admissible range (in shift)' did not verify.
Verification of foo7 succeeded.
`

#include <vcc2.h>

void foo() {
	unsigned __int8 a = 4;
	unsigned __int32 i = a << 12;
}

void bar(int j) 
	requires(0 <= j && j < 32)
{
	unsigned __int8 a = 4;
	__int32 i = unchecked(a << j);
}
`
Verification of foo succeeded.
Verification of bar succeeded.
`