#include "vcc.h"

void foo(struct S *x, struct T y) {
	struct V a;
}
`
testcase(3,23) : error VC0000: 'y' : illegal use of undefined type 'T'.
testcase(4,9) : error VC0000: 'a' : illegal use of type 'void'.
`
#include "vcc.h"

struct Foo {
   unsigned N;
   invariant(0 < N);
   invariant(forall(true)); 
};
`
testcase(6,16) : error VC0000: Quantifier without variables.
`
#include <vcc.h>

void foo() {
  const int y;
  y = 1;
}
`
testcase(5,3) : error VC0000: The left-hand side of an assignment must be a variable, property or indexer.
`
#include <vcc.h>

void foo() {
  int x;
  const int y = x;
  x = y;
  assert(x == y);
}
`
Verification of foo succeeded.
`
#include "vcc.h"
spec(struct U { invariant(this==&u) } u;)
`
Verification of U#adm succeeded.
`
#include "vcc.h"

void foo(int *a, unsigned n)
	requires(n && typed(as_array(a,n)))
{
	assert(set_in(a+0,span(as_array(a,n))));
}
`
Verification of foo succeeded.
`
#include <vcc.h>

// the following used to seen Z3 into a loop

void loops(bool *a, unsigned N, unsigned n)
  requires(wrapped(as_array(a,N)))
{
  unsigned j, k;
  for (j=0, k = 0; j<N; j++) k++;
}
`
Verification of loops failed.
testcase(9,30) : error VC8004: k++ might overflow.
`
#include "vcc.h"

spec(struct vcc(record) Output {
    unsigned out;
    unsigned x;
};)

void foo(spec(struct Output o))
    requires(o.out==5)
    requires(o.x==5)
{}
`
Verification of foo succeeded.
`
#include "vcc.h"

typedef struct vcc(claimable) X {
  int dummy;

  def_group(R)
  in_group(R) claimp(c;)
  inv_group(R,c)
};
`
Verification of X##R#adm succeeded.
`
#include "vcc.h"

void foo(int *a)
	requires(a))))
	writes(a)))))
{
}
`
testcase(4,15) : error VC0000: Invalid expression term ')'.
testcase(5,13) : error VC0000: Invalid expression term ')'.
`