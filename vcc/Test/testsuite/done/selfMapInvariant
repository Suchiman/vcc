#include <vcc.h>

typedef unsigned __int64 UINT64;
typedef unsigned __int8 PAGE[4096];
typedef void *PVOID;

static PAGE PhysicalPages[512];

typedef union _PTE {
  UINT64 AsUINT64;
  struct {
    UINT64 Present:1;
    UINT64 ReadWrite:1;
    UINT64 Pfn:9;
    UINT64 Reserved:52;
  };
} PTE, *PPTE;

spec(ispure bool InvSelfmapping()
  reads(set_universe())
  ensures ( result == 
    ((((PPTE)PhysicalPages[23]) + 0x1FE)->Pfn == 23 && 
    (((PPTE)PhysicalPages[23]) + 0x1FE)->Present == 1 &&      
    (((PPTE)PhysicalPages[23]) + 0x1FE)->ReadWrite == 1));)

void foo()
  requires(InvSelfmapping())
  ensures(InvSelfmapping())
  {
  }
  
`
Verification of foo succeeded.
`
