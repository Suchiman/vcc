#include <vcc.h>

struct S {
  int a;
  int b;
};

struct T {
  int x;
  struct S s;
  int y;
};

#ifdef VERIFY
template<typename T>
T read_typed(T *t)
    requires(typed(t))
    ;
#endif

void foo(struct T *p)
  requires(wrapped(p))
{
  int i,j;
  assert(typed(&p->s));
  i = read_typed(&(p->s.a));
  assert(typed(&p->s));
  j = read_typed(&(p->s.a));
}
`
testcase(16,1) : error VC9693: Cannot return value of generic type 'T'
`
