#include <vcc.h>

#ifdef VERIFY 
typedef int MAP[int];
#endif

struct S {
  int i;
  spec(MAP m;)
};

void foo(struct S *s, int j)
  writes(s)
  maintains(wrapped(s))
  ensures(forall(int i; s->m[i] == lambda(int n; true; n == j ? 0 : old(s->m)[n])[i]))
{
  expose(s) {
    spec(s->m[j] = 0;)
  }
}
`
Verification of foo succeeded.
`
