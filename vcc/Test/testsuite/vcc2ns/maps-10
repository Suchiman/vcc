#include "vcc.h"

void xxx(unsigned i) {
   spec(bool map1[unsigned];) 
   spec(bool map2[unsigned];) 
   spec(map2 = ((i==2)? map1: map2);)
}

void bar(unsigned i) {
   spec(bool map[unsigned];) 
   spec(map = (lambda(unsigned j; true; i==j || map[j]));)
   //error VC9600: OOPS: error in expr
}


void works(unsigned i) {
   spec(unsigned map[unsigned];) 
   spec(map = (lambda(unsigned j; true; ((i==j)? i: (map[j]))));)
}
`
Verification of xxx succeeded.
Verification of bar succeeded.
Verification of works succeeded.
`
