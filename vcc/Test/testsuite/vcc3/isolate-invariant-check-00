`/newsyntax
#include <vcc.h>

struct A {
  int x, y;
  _(invariant x > y)
  _(invariant x > 0)
};


void foo(struct A *a)
  _(updates a)
{
   _(unwrapping _(isolate)a) {
     a->x = 7;
     a->y = 3;
   }
}

void foo2(struct A *a)
  _(updates a)
{
   _(unwrapping _(isolate)a) {
     a->x = 7;
     a->y = 8;
   }
   _(assert \false) // should fail, because the other assert false was in a block
}

void foo3(struct A *a)
  _(updates a)
{
   _(unwrapping a) {
     a->x = 7;
     a->y = 8;
   }
   _(assert \false) // should succeed
}


void foo5(struct A *a)
  _(updates a)
{
   _(unwrap a)
     a->x = 7;
     a->y = 3;
   _(wrap _(isolate)a)
}

void foo6(struct A *a)
  _(updates a)
{
   _(unwrap a)
     a->x = 7;
     a->y = 8;
   _(wrap _(isolate)a)
   _(assert \false) // should fail, because the other assert false was in a block
}

void foo7(struct A *a)
  _(updates a)
{
   _(unwrap a)
     a->x = 7;
     a->y = 8;
   _(wrap a)
   _(assert \false) // should succeed
}


`
Verification of A#adm succeeded.
Verification of foo succeeded.
Verification of foo2 failed.
testcase(22,17) : error VC8014: invariant(x > y) of A fails on wrap.
testcase(5,15) : error VC9599: (related information) location of the invariant.
testcase(26,13) : error VC9500: Assertion '\false' did not verify.
Verification of foo3 failed.
testcase(32,17) : error VC8014: invariant(x > y) of A fails on wrap.
testcase(5,15) : error VC9599: (related information) location of the invariant.
Verification of foo5 succeeded.
Verification of foo6 failed.
testcase(55,11) : error VC8014: invariant(x > y) of A fails on wrap.
testcase(5,15) : error VC9599: (related information) location of the invariant.
testcase(56,13) : error VC9500: Assertion '\false' did not verify.
Verification of foo7 failed.
testcase(65,11) : error VC8014: invariant(x > y) of A fails on wrap.
testcase(5,15) : error VC9599: (related information) location of the invariant.
`
