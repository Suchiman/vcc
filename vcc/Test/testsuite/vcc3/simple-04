#include <vcc.h>

struct A {
  int x;
  int y;
};


void fooFail(struct A *a)
  writes(&a->x)
{
  while (true)
    writes(&a->x,&a->y)
  { a->x = 0; }
}

void fooOk(struct A *a)
  writes(&a->x,&a->y)
{
  while (true)
    writes(&a->x,&a->y)
  { a->x = 0; }
}

void fooOkWrap(struct A *a)
  writes(a)
  requires(wrapped(a))
{
  unwrap(a);
  while (true)
    writes(&a->x,&a->y)
  { a->x = 0; }
}


void fooFailWrap(struct A *a)
  writes(a)
  requires(wrapped(a))
{
  int z;
  unwrap(a);
  wrap(a);
  while (true)
    writes(&a->x)
  {
    z = 0;
  }
}

`
Verification of fooFail failed.
testcase(13,15) : error VC8011: writes clause of the loop might not be included writes clause of the function.
Verification of fooOk succeeded.
Verification of fooOkWrap succeeded.
Verification of fooFailWrap failed.
testcase(44,15) : error VC8011: writes clause of the loop might not be included writes clause of the function.
`
